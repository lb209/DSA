<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heap Sort Example</title>
</head>
<body>
  <h2>Heap Sort with Step-by-Step Console Output</h2>
  <button onclick="runHeapSort()">Run Heap Sort</button>

  <script>
    // Heapify function: maintain max-heap property for subtree rooted at i
    function heapify(arr, n, i) {
      let largest = i;       // Initialize largest as root
      let left = 2 * i + 1;  // left child index
      let right = 2 * i + 2; // right child index

      // If left child is larger than root
      if (left < n && arr[left] > arr[largest]) {
        largest = left;
      }

      // If right child is larger than largest so far
      if (right < n && arr[right] > arr[largest]) {
        largest = right;
      }

      // If largest is not root
      if (largest !== i) {
        console.log(`Swap arr[${i}] = ${arr[i]} with arr[${largest}] = ${arr[largest]}`);
        [arr[i], arr[largest]] = [arr[largest], arr[i]];

        // Recursively heapify the affected subtree
        heapify(arr, n, largest);
      }
    }

    function heapSort(arr) {
      let n = arr.length;

      console.log("Original Array:", arr);

      // Build max heap
      for (let i = Math.floor(n / 2) - 1; i >= 0; i--) {
        heapify(arr, n, i);
      }
      console.log("Max-Heap:", arr);

      // Extract elements one by one from heap
      for (let i = n - 1; i > 0; i--) {
        console.log(`Swap root arr[0] = ${arr[0]} with arr[${i}] = ${arr[i]}`);
        [arr[0], arr[i]] = [arr[i], arr[0]];

        // Heapify reduced heap
        heapify(arr, i, 0);
        console.log(`Heap after extracting element ${i}:`, arr);
      }

      console.log("Sorted Array:", arr);
    }

    function runHeapSort() {
      let arr = [12, 3, 55, 6, 7, 1, 33];
      heapSort(arr);
    }
  </script>
</body>
</html>
